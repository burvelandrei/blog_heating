{% extends 'base.html' %}
{% load filters %}
{% block title %}{{ publication.title }}{% endblock %}

{% block content %}
<h2>{{ publication.title }}</h2>
<div>
    <h3>Дата публикации: {{publication.publisched_at|date:"d.m.Y"}}</h3> 
    <h3>Дата создания: {{publication.content_object.created_at|date:"d.m.Y"}}</h3>
</div>

{% if publication.content_type.model == 'article' %}
<p>{{ publication.content_object.content }}</p>
{% elif publication.content_type.model == 'video' %}
    {% with youtube_url=publication.content_object.youtube_url %}
        {% with video_id=youtube_url|get_youtube_video_id %}
            {% if video_id %}
                <iframe width="1000" height="600"
                src="https://www.youtube.com/embed/{{ video_id }}"
                frameborder="0" allowfullscreen></iframe>
            {% else %}
                <p>Invalid YouTube URL</p>
            {% endif %}
        {% endwith %}
    {% endwith %}
{% endif %}

{% endblock %}